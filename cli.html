<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CLI &mdash; MESSES 0.1.dev1+g64db5f6 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom_css.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="User Guide" href="guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> MESSES
          </a>
              <div class="version">
                0.1.dev1+g64db5f6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CLI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extract">Extract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#validate">Validate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#convert">Convert</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tagging.html">Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversion_directives.html">Conversion Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment_description_schema.html">Experiment Description Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocol_dependent_schema.html">Protocol-Dependent Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported_formats.html">Supported Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TODO List</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MESSES</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>CLI</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cli.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cli">
<h1>CLI<a class="headerlink" href="#cli" title="Permalink to this heading"></a></h1>
<section id="extract">
<h2>Extract<a class="headerlink" href="#extract" title="Permalink to this heading"></a></h2>
<p>The extract command of MESSES supports turning tabular data into JSON.
This is done by adding a layer of tags on top of the data. These tags tell
extract how to construct the JSON tables and records. There are features
for automatically applying tags to untagged data and features for modifying
the names and values of data. extract can also be used to modify already
JSONized data. There is also support for viewing the data in different ways, such
as viewing the record lineages. For a more detailed explanation of the options
with examples as to how they might be used see the <a class="reference internal" href="tutorial.html"><span class="doc">Tutorial</span></a> page.</p>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> Usage:
    messes extract &lt;metadata_source&gt;... [--delete &lt;metadata_section&gt;...] [options]
    messes extract --help

    &lt;metadata_source&gt; - tagged input metadata source as csv/json filename or xlsx_filename[:worksheet_name|regular_expression]. &quot;#export&quot; worksheet name is the default.

 Options:
    -h, --help                          - show this help documentation.
    -v, --version                       - show the version.
    --silent                            - print no warning messages.
    --output &lt;filename_json&gt;            - output json filename.
    --compare &lt;filename_json&gt;           - compare extracted metadata to given JSONized metadata.
    --modify &lt;source&gt;                   - modification directives worksheet name, regular expression, csv/json filename, or xlsx_filename:[worksheet_name|regular_expression] [default: #modify].
    --end-modify &lt;source&gt;               - apply modification directives after all metadata merging. Requires csv/json filename or xlsx_filename:[worksheet_name|regular_expression].
    --automate &lt;source&gt;                 - automation directives worksheet name, regular expression, csv/json filename, or xlsx_filename:[worksheet_name|regular_expression] [default: #automate].
    --save-directives &lt;filename_json&gt;   - output filename with modification and automation directives in JSON format.
    --save-export &lt;filetype&gt;            - output export worksheet with suffix &quot;_export&quot; and with the indicated xlsx/csv format extension.
    --show &lt;show_option&gt;                - show a part of the metadata. See options below.
    --delete &lt;metadata_section&gt;...      - delete a section of the JSONized metadata. Section format is tableKey or tableKey,IDKey or tableKey,IDKey,fieldName. These can be regular expressions.
    --keep &lt;metadata_tables&gt;            - only keep the selected tables.  Delete the rest.  Table format is tableKey,tableKey,... The tableKey can be a regular expression.
    --file-cleaning &lt;remove_regex&gt;      - a string or regular expression to remove characters in input files, removes unicode and \r characters by default, enter &quot;None&quot; to disable [default: _x([0-9a-fA-F]{4})_|\r].

Show Options:
  tables    - show tables in the extracted metadata.
  lineage   - show parent-child lineages per table.
  all       - show every option.

Regular Expression Format:
  Regular expressions have the form &quot;r&#39;...&#39;&quot; on the command line.
  The re.match function is used, which matches from the beginning of a string, meaning that a regular expression matches as if it starts with a &quot;^&quot;.

 Directives JSON Format:
   {
    &quot;modification&quot; : { table : { field :  { &quot;(exact|regex|levenshtein)\-(first|first\-nowarn|unique|all)&quot; :
                      { field_value : { &quot;assign&quot; : { field : value,... }, &quot;append&quot; : { field : value,... }, &quot;prepend&quot; : { field : value,... },
                                        &quot;regex&quot; : { field : regex_pair,... }, &quot;delete&quot; : [ field,... ], &quot;rename&quot; : { old_field : new_field } } } } } }
    &quot;automation&quot; : [ { &quot;header_tag_descriptions&quot; : [ { &quot;header&quot; : column_description, &quot;tag&quot; : tag_description, &quot;required&quot; : true|false } ],   &quot;exclusion_test&quot; : exclusion_value, &quot;insert&quot; : [ [ cell_content, ... ] ] } ]
   }

</pre></div>
</div>
</section>
</section>
<section id="validate">
<h2>Validate<a class="headerlink" href="#validate" title="Permalink to this heading"></a></h2>
<p>The validate command of MESSES supports validating JSON data. This is done largely
through utilizing <a class="reference external" href="https://json-schema.org/understanding-json-schema/">JSON Schema</a>,
but validation beyond the capabilities of JSON Schema is also done. By default
JSON files are validated against the <a class="reference internal" href="experiment_description_schema.html"><span class="doc">Experiment Description Schema</span></a>, but this
can be turned off with options. Users can also provide additional validation in
the form of their own JSON schema and <a class="reference internal" href="protocol_dependent_schema.html"><span class="doc">Protocol-Dependent Schema</span></a>. More details
and examples for the validate command are in the <a class="reference internal" href="tutorial.html"><span class="doc">Tutorial</span></a>.</p>
<section id="id1">
<h3>Usage<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage:
    messes validate json &lt;input_JSON&gt; [--pds=&lt;pds&gt; [--csv | --xlsx | --json] | --no_base_schema] 
                                      [--no_extra_checks]
                                      [--additional=&lt;add_schema&gt;] 
                                      [--format=&lt;format&gt;]
                                      [--silent=&lt;level&gt;]
    messes validate save-schema &lt;output_schema&gt; [--input=&lt;input_JSON&gt;] 
                                                [--pds=&lt;pds&gt; [--csv | --xlsx | --json]] 
                                                [--format=&lt;format&gt;]
                                                [--silent=&lt;level&gt;]
    messes validate schema &lt;input_schema&gt;
    messes validate pds &lt;pds&gt; [--csv | --xlsx | --json] [--silent=&lt;level&gt;]
    messes validate --help
    
    &lt;input_JSON&gt; - if &#39;-&#39; read from standard input.
    &lt;pds&gt; - can be a JSON, csv, or xlsx file. If xlsx the default sheet name to read in is #validate, 
           to specify a different sheet name separate it from the file name with a colon ex: file_name.xlsx:sheet_name.
           If &#39;-&#39; read from standard input.
    &lt;input_schema&gt; - must be a valid JSON Schema file. If &#39;-&#39; read from standard input.
    &lt;output_schema&gt; - if &#39;-&#39; save to standard output.

Options:
    -h, --help                           - show this screen.
    -v, --version                        - show version.
    --silent &lt;level&gt;                     - if &quot;full&quot; silence all warnings, 
                                           if &quot;nuisance&quot; silence warnings that are more likely to be a nuisance,
                                           if &quot;none&quot; do not silence warnings [default: none].
    --pds &lt;pds&gt;                            - a protocol-dependent schema file, can be a JSON, csv, or xlsx file. 
                                           If xlsx the default sheet name to read in is #validate, to specify 
                                           a different sheet name separate it from the file name with a colon 
                                           ex: file_name.xlsx:sheet_name.
    --csv                                - indicates that the protocol-dependent schema file is a csv (comma delimited) file.
    --xlsx                               - indicates that the protocol-dependent schema file is an xlsx (Excel) file.
    --json                               - indicates that the protocol-dependent schema file is a JSON file.
                                           If a file type is not given then it will be guessed from the file extension.
    --additional &lt;add_schema&gt;            - an additional JSON Schema file that will be used to validate &lt;input_JSON&gt;.
    --format &lt;format&gt;                    - additional validation done for the desired supported format. 
                                           Current supported formats: 
                                               mwtab_MS, 
                                               mwtab_NMR, 
                                               mwtab_NMR_bin
    --no_base_schema                     - don&#39;t validate with the base JSON schema.
    --no_extra_checks                    - only do JSON Schema validation and nothing else.
    --input &lt;input_JSON&gt;                 - optionally give an input JSON file to save-schema to reproduce the 
                                           schema used to validate in the json command.
    

The &quot;json&quot; command will validate the &lt;input_JSON&gt; against the internal base_schema, and optional schema provided 
by the --pds and --additional options. To validate only against a provided schema, use the --additional and --no_base_schema options.

The &quot;save-schema&quot; command will save the internal base_schema to the &lt;output_schema&gt; location. If --pds is given 
then it will be parsed and placed into the base_schema. If --input is given the protocols table will be added 
in with the PDS to reproduce what happens in the json command. If --format is used then that format schema is 
saved instead of the base_schema.

The &quot;schema&quot; command will validate the &lt;input_schema&gt; against the JSON Schema meta schema.

The &quot;pds&quot; command will validate that the &lt;pds&gt; file is a valid protocol-dependent schema file.
</pre></div>
</div>
</section>
</section>
<section id="convert">
<h2>Convert<a class="headerlink" href="#convert" title="Permalink to this heading"></a></h2>
<p>The convert command of MESSES supports converting JSON data to another JSON format
or another supported format. This is done by using conversion directives, which
are detailed in the <a class="reference internal" href="conversion_directives.html"><span class="doc">Conversion Directives</span></a> section. Arbitrary JSON to JSON
conversions are supported through the “generic” command and all supported formats
are converted using commands that match thier namesake. All supported formats are
detailed in the <a class="reference internal" href="supported_formats.html"><span class="doc">Supported Formats</span></a> section. More details and examples for
the convert command are in the <a class="reference internal" href="tutorial.html"><span class="doc">Tutorial</span></a>.</p>
<section id="id2">
<h3>Usage<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage:
    messes convert mwtab (ms | nmr | nmr_binned) &lt;input_JSON&gt; &lt;output_name&gt; [--update &lt;conversion_directives&gt; | --override &lt;conversion_directives&gt;] [--silent]
    messes convert save-directives mwtab (ms | nmr | nmr_binned) &lt;output_filetype&gt; [&lt;output_name&gt;]
    messes convert generic &lt;input_JSON&gt; &lt;output_name&gt; &lt;conversion_directives&gt; [--silent]
    messes convert --help
    
    &lt;conversion_directives&gt; - can be a JSON, csv, or xlsx file. If xlsx the default sheet name to read in is #convert, 
                              to specify a different sheet name separate it from the file name with a colon ex: file_name.xlsx:sheet_name.

Options:
    -h, --help                           - show this screen.
    -v, --version                        - show version.
    --silent                             - silence all warnings.
    --update &lt;conversion_directives&gt;     - conversion directives that will be used to update the built-in directives for the format.
                                           This is intended to be used for simple changes such as updating the value of 
                                           the analysis ID. You only have to specify what needs to change, any values 
                                           that are left out of the update directives won&#39;t be changed. If you need to remove 
                                           directives then use the override option.
    --override &lt;conversion_directives&gt;   - conversion directives that will be used to override the built-in directives for the format.
                                           The entire JSON must be specified, any directives that are not in the override JSON 
                                           will be removed.
    
    

The general command structure for convert is convert &lt;format&gt; which will convert an input JSON file over to the supported format. 
The outputs of these commands will save both the JSON conversion and the final format file.

The generic command is the same as the supported formats except the user is required to input conversion directives specifying how to 
convert the input JSON to the desired output JSON. Only an output JSON is saved.

The save-directives command is used to print the default conversion directives used by convert for any of the supported formats. &lt;output-filetype&gt; 
can be one of &quot;json&quot;, &quot;xlsx&quot;, or &quot;csv&quot;. The file is saved as &quot;format_conversion_directives.ext&quot; where &quot;.ext&quot; is replaced with &quot;.json&quot;, &quot;.xlsx&quot;, 
or &quot;.csv&quot; depending on the value of &lt;output-format&gt;, unless &lt;output_name&gt; is given.

</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="guide.html" class="btn btn-neutral float-left" title="User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Hunter Moseley, Travis Thompson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>